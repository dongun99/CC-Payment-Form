"use strict";var ccForm=function(){function e(){y.classList.toggle("flip")}function t(e){var t;if(e)return o.forEach(function(n){if(n.pattern.test(e))return t=n,!0}),t}function n(e){""===e.target.value&&(c=null),c?E.setAttribute("class","pf "+c.css):E.removeAttribute("class")}function r(e){var n,r=e.keyCode||e.which,a=String.fromCharCode(r),i=e.target.value+a;c=t(i),n=c&&c.spacePattern?c.spacePattern:l,/^\d+$/.test(a)&&n.test(i)&&(e.preventDefault(),i.length<=19&&(e.target.value=i+" ",e.target.selectionStart+=1))}function a(e){var t=e.keyCode||e.which;if(!([46,8,9,27,13].indexOf(t)!==-1||[65,67,86,88].indexOf(t)!==-1&&e.ctrlKey||[97,99,118,120].indexOf(t)!==-1&&e.metaKey||t>=35&&t<=39||e.shiftKey||32===t)){var n=String.fromCharCode(e.which);n&&/\d/.test(n)||e.preventDefault()}}function i(e){var t,n,r=e.target.value,a=e.keyCode||e.which,i=r.match(/^(\d+)\/?(\d*)/);i&&[8,46].indexOf(a)===-1&&(t=i[1]||"",n=i[2]||"",t.length<2&&t>1?(t="0"+t,e.target.value=t,e.target.selectionStart+=1):t.length>2?(n=t.substring(2)+n,t=t.substring(0,2),e.target.value=t+"/"+n,e.target.selectionStart+=1):n.length>0?e.target.value=t+"/"+n:t.length<2?e.target.value=t:e.target.value=t+"/")}function d(e){var t=e.target.value.replace(/(\s)/g,"");return""===t||c&&t.length==c.numLength?void g.removeAttribute("class"):void g.classList.add("invalid")}function s(e){if(""!==e.target.value){var t=e.target.value.match(/^(\d+)\/?(\d*)/),n=new Date;if(!t[1]||parseInt(t[1])<1||parseInt(t[1])>12)return void h.classList.add("invalid");if(!t[2]||"20"+parseInt(t[2])<n.getFullYear())return void h.classList.add("invalid");if(t[1]&&t[2]){var r=new Date("20"+t[2],t[1]-1,"01");if(r<n)return void h.classList.add("invalid")}h.removeAttribute("class")}}var c,u={},l=/(?:^|\s)(\d{4})$/,o=[{name:"MasterCard",css:"pf-mastercard",pattern:/^(5)[1-5]|^(2((2[2-6][1-9])|2[3-9]|[3-6]|(7[0-1])|720))/,numLength:16},{name:"Visa",css:"pf-visa",pattern:/^4/,numLength:16},{name:"AmericanExpress",css:"pf-american-express",pattern:/^3[47]/,spacePattern:/^(\d{4}|\d{4}\s\d{6})$/,numLength:16},{name:"Discover",css:"pf-discover",pattern:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,numLength:16}],v=document.getElementById("cardnumber"),g=document.getElementById("ph-cardnumber"),m=document.getElementById("cvc"),f=document.getElementById("ph-cvc"),p=document.getElementById("expiry"),h=document.getElementById("ph-expiry"),y=document.getElementById("card-container"),E=document.getElementById("card-icon-type"),L=document.getElementById("payment-form-container");return u.init=function(){var t=[].slice.call(L.querySelectorAll("input[type=text]"));t.forEach(function(e){e.addEventListener("keyup",function(t){document.getElementById("ph-"+e.getAttribute("id")).innerHTML=t.target.value})}),v.addEventListener("keypress",a),v.addEventListener("keypress",r),v.addEventListener("keyup",n),v.addEventListener("blur",d),p.addEventListener("keypress",a),p.addEventListener("keyup",i),p.addEventListener("blur",s),m.addEventListener("keypress",a),m.addEventListener("focus",e),m.addEventListener("blur",e),m.addEventListener("keyup",function(e){var t=""!==e.target.value?"noborder":"";f.setAttribute("class",t)})},u}();document.addEventListener("DOMContentLoaded",function(){ccForm.init()});